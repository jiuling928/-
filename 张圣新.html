<!DOCTYPE html>
<html lang="zh-CN">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>烟花雨文字特效</title>
	<style>
		* {
			margin: 0;
			padding: 0;
			box-sizing: border-box;
		}
		
		body {
			background-color: #000;
			color: #fff;
			font-family: 'Microsoft YaHei', Arial, sans-serif;
			overflow: hidden;
			height: 100vh;
			position: relative;
		}
		
		.container {
			position: relative;
			width: 100%;
			height: 100%;
		}
		
		/* 顶部标题样式 */
		.header {
			text-align: center;
			padding: 20px;
			background: rgba(0, 0, 0, 0.7);
			border-bottom: 2px solid #ff3366;
			z-index: 100;
			position: relative;
		}
		
		.header h1 {
			color: #ff3366;
			font-size: 2.8rem;
			text-shadow: 0 0 10px #ff0066, 0 0 20px #ff0066;
			margin-bottom: 10px;
		}
		
		.header p {
			color: #66ccff;
			font-size: 1.2rem;
			max-width: 800px;
			margin: 0 auto;
			line-height: 1.6;
		}
		
		/* 烟花画布 */
		#fireworksCanvas {
			position: absolute;
			top: 0;
			left: 0;
			width: 100%;
			height: 100%;
			z-index: 1;
		}
		
		/* 文字滚动区域 */
		.text-scroll-container {
			position: absolute;
			top: 0;
			left: 0;
			width: 100%;
			height: 100%;
			z-index: 2;
			display: flex;
			justify-content: center;
			align-items: center;
			pointer-events: none;
		}
		
		.text-scroll {
			width: 100%;
			height: 100%;
			position: relative;
			overflow: hidden;
		}
		
		.scrolling-text {
			position: absolute;
			width: 100%;
			text-align: center;
			font-size: 2.5rem;
			font-weight: bold;
			color: #ffcc00;
			text-shadow: 0 0 10px #ff9900, 0 0 20px #ff6600;
			white-space: nowrap;
			animation: scrollDown 20s linear infinite;
		}
		
		@keyframes scrollDown {
			0% {
				top: -100px;
				opacity: 0;
			}
			10% {
				opacity: 1;
			}
			90% {
				opacity: 1;
			}
			100% {
				top: 100%;
				opacity: 0;
			}
		}
		
		/* 控制面板 */
		.controls {
			position: absolute;
			bottom: 20px;
			left: 0;
			width: 100%;
			display: flex;
			justify-content: center;
			z-index: 100;
		}
		
		.control-panel {
			background: rgba(0, 0, 0, 0.7);
			border: 2px solid #3366ff;
			border-radius: 10px;
			padding: 15px 25px;
			display: flex;
			gap: 15px;
			flex-wrap: wrap;
			justify-content: center;
			max-width: 90%;
		}
		
		button {
			background: linear-gradient(to bottom, #ff3366, #990033);
			color: white;
			border: none;
			border-radius: 5px;
			padding: 10px 20px;
			font-size: 1rem;
			cursor: pointer;
			transition: all 0.3s;
		}
		
		button:hover {
			background: linear-gradient(to bottom, #ff6699, #cc0033);
			transform: scale(1.05);
		}
		
		button:active {
			transform: scale(0.98);
		}
		
		/* 响应式调整 */
		@media (max-width: 768px) {
			.header h1 {
				font-size: 2rem;
			}
			
			.header p {
				font-size: 1rem;
			}
			
			.scrolling-text {
				font-size: 1.8rem;
			}
			
			.control-panel {
				padding: 10px 15px;
			}
			
			button {
				padding: 8px 15px;
				font-size: 0.9rem;
			}
		}
	</style>
</head>
<body>
	<div class="container">
		<div class="header">
			<h1>烟花雨文字特效</h1>
			<p>文字"张圣新是蠢猪"以烟花爆炸和滚屏形式呈现。点击"发射烟花"按钮或点击屏幕任意位置发射烟花，文字会从上到下滚动显示。</p>
		</div>
		
		<!-- 烟花画布 -->
		<canvas id="fireworksCanvas"></canvas>
		
		<!-- 文字滚动区域 -->
		<div class="text-scroll-container">
			<div class="text-scroll" id="textScroll">
				<!-- 动态添加滚动文字 -->
			</div>
		</div>
		
		<!-- 控制面板 -->
		<div class="controls">
			<div class="control-panel">
				<button id="launchFirework">发射烟花</button>
				<button id="toggleScroll">切换文字滚动</button>
				<button id="changeColor">切换颜色</button>
				<button id="fireworksBurst">烟花爆发</button>
				<button id="resetAll">重置所有</button>
			</div>
		</div>
	</div>

	<script>
		// 获取Canvas元素和上下文
		const canvas = document.getElementById('fireworksCanvas');
		const ctx = canvas.getContext('2d');
		const textScrollContainer = document.getElementById('textScroll');
		
		// 设置Canvas尺寸为窗口大小
		function resizeCanvas() {
			canvas.width = window.innerWidth;
			canvas.height = window.innerHeight;
		}
		
		// 初始调整尺寸
		resizeCanvas();
		window.addEventListener('resize', resizeCanvas);
		
		// 烟花和粒子系统
		const fireworks = [];
		const particles = [];
		const text = "张圣新是蠢猪";
		const textArray = text.split('');
		let scrollActive = true;
		let colorMode = 0; // 0: 默认, 1: 红色系, 2: 蓝色系, 3: 彩虹色
		
		// 颜色配置
		const colorSchemes = [
			['#ff3366', '#ffcc00', '#33ccff', '#33ff99', '#ff66cc'], // 默认
			['#ff0000', '#ff6666', '#ff9999', '#cc0000', '#990000'], // 红色系
			['#0066ff', '#3399ff', '#66ccff', '#0033cc', '#000099'], // 蓝色系
			['#ff0000', '#ff9900', '#ffff00', '#00ff00', '#0066ff', '#9900cc'] // 彩虹色
		];
		
		// 粒子类
		class Particle {
			constructor(x, y, char, color) {
				this.x = x;
				this.y = y;
				this.char = char;
				this.color = color || this.getRandomColor();
				this.size = Math.random() * 20 + 10;
				this.speedX = Math.random() * 6 - 3;
				this.speedY = Math.random() * 6 - 3;
				this.gravity = 0.05;
				this.friction = 0.97;
				this.alpha = 1;
				this.decay = Math.random() * 0.02 + 0.005;
			}
			
			getRandomColor() {
				const colors = colorSchemes[colorMode];
				return colors[Math.floor(Math.random() * colors.length)];
			}
			
			update() {
				this.speedX *= this.friction;
				this.speedY *= this.friction;
				this.speedY += this.gravity;
				this.x += this.speedX;
				this.y += this.speedY;
				this.alpha -= this.decay;
				
				return this.alpha > 0;
			}
			
			draw() {
				ctx.save();
				ctx.globalAlpha = this.alpha;
				ctx.font = `${this.size}px 'Microsoft YaHei', Arial, sans-serif`;
				ctx.fillStyle = this.color;
				ctx.textAlign = 'center';
				ctx.textBaseline = 'middle';
				ctx.fillText(this.char, this.x, this.y);
				
				// 添加发光效果
				if (this.alpha > 0.5) {
					ctx.shadowBlur = 10;
					ctx.shadowColor = this.color;
				}
				ctx.restore();
			}
		}
		
		// 烟花类
		class Firework {
			constructor(x, y, targetX, targetY) {
				this.x = x;
				this.y = y;
				this.targetX = targetX;
				this.targetY = targetY;
				this.speedX = (targetX - x) / 60;
				this.speedY = (targetY - y) / 60;
				this.color = this.getRandomColor();
				this.size = 3;
				this.exploded = false;
			}
			
			getRandomColor() {
				const colors = colorSchemes[colorMode];
				return colors[Math.floor(Math.random() * colors.length)];
			}
			
			update() {
				this.x += this.speedX;
				this.y += this.speedY;
				
				// 添加一些随机性
				this.speedX += (Math.random() - 0.5) * 0.2;
				this.speedY += (Math.random() - 0.5) * 0.2;
				
				// 检查是否到达目标位置
				const dx = this.targetX - this.x;
				const dy = this.targetY - this.y;
				const distance = Math.sqrt(dx * dx + dy * dy);
				
				if (distance < 20 && !this.exploded) {
					this.explode();
				}
				
				return !this.exploded;
			}
			
			explode() {
				this.exploded = true;
				
				// 创建爆炸粒子
				const particleCount = 50;
				for (let i = 0; i < particleCount; i++) {
					const char = textArray[Math.floor(Math.random() * textArray.length)];
					particles.push(new Particle(this.x, this.y, char, this.color));
				}
			}
			
			draw() {
				ctx.save();
				ctx.fillStyle = this.color;
				ctx.beginPath();
				ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
				ctx.fill();
				
				// 添加尾迹效果
				ctx.shadowBlur = 10;
				ctx.shadowColor = this.color;
				ctx.restore();
			}
		}
		
		// 创建滚动文字
		function createScrollingText() {
			textScrollContainer.innerHTML = '';
			
			if (!scrollActive) return;
			
			// 创建多个文本元素，以创建连续滚动的效果
			for (let i = 0; i < 15; i++) {
				const textElement = document.createElement('div');
				textElement.className = 'scrolling-text';
				textElement.textContent = text;
				textElement.style.left = `${Math.random() * 100}%`;
				textElement.style.animationDelay = `${i * 1.5}s`;
				textElement.style.fontSize = `${Math.random() * 20 + 25}px`;
				textElement.style.color = getScrollTextColor();
				textScrollContainer.appendChild(textElement);
			}
		}
		
		// 获取滚动文字颜色
		function getScrollTextColor() {
			const colors = ['#ffcc00', '#ff9966', '#66ffcc', '#6699ff', '#ff66cc'];
			return colors[Math.floor(Math.random() * colors.length)];
		}
		
		// 发射烟花
		function launchFirework() {
			const startX = canvas.width / 2;
			const startY = canvas.height;
			const targetX = Math.random() * canvas.width;
			const targetY = Math.random() * (canvas.height / 2) + 50;
			
			fireworks.push(new Firework(startX, startY, targetX, targetY));
		}
		
		// 烟花爆发效果
		function fireworksBurst() {
			const burstCount = 10;
			for (let i = 0; i < burstCount; i++) {
				setTimeout(() => {
					const startX = Math.random() * canvas.width;
					const startY = canvas.height;
					const targetX = Math.random() * canvas.width;
					const targetY = Math.random() * (canvas.height / 2) + 50;
					
					fireworks.push(new Firework(startX, startY, targetX, targetY));
				}, i * 100);
			}
		}
		
		// 动画循环
		function animate() {
			// 清除画布，使用半透明黑色创建尾迹效果
			ctx.fillStyle = 'rgba(0, 0, 0, 0.2)';
			ctx.fillRect(0, 0, canvas.width, canvas.height);
			
			// 更新和绘制所有烟花
			for (let i = fireworks.length - 1; i >= 0; i--) {
				if (!fireworks[i].update()) {
					fireworks.splice(i, 1);
				} else {
					fireworks[i].draw();
				}
			}
			
			// 更新和绘制所有粒子
			for (let i = particles.length - 1; i >= 0; i--) {
				if (!particles[i].update()) {
					particles.splice(i, 1);
				} else {
					particles[i].draw();
				}
			}
			
			requestAnimationFrame(animate);
		}
		
		// 初始化
		function init() {
			// 初始创建滚动文字
			createScrollingText();
			
			// 开始动画循环
			animate();
			
			// 初始发射一些烟花
			setTimeout(() => {
				for (let i = 0; i < 3; i++) {
					setTimeout(launchFirework, i * 300);
				}
			}, 1000);
		}
		
		// 事件监听
		document.getElementById('launchFirework').addEventListener('click', launchFirework);
		
		document.getElementById('toggleScroll').addEventListener('click', function() {
			scrollActive = !scrollActive;
			if (scrollActive) {
				createScrollingText();
				this.textContent = '关闭文字滚动';
			} else {
				textScrollContainer.innerHTML = '';
				this.textContent = '开启文字滚动';
			}
		});
		
		document.getElementById('changeColor').addEventListener('click', function() {
			colorMode = (colorMode + 1) % colorSchemes.length;
			createScrollingText();
		});
		
		document.getElementById('fireworksBurst').addEventListener('click', fireworksBurst);
		
		document.getElementById('resetAll').addEventListener('click', function() {
			fireworks.length = 0;
			particles.length = 0;
			scrollActive = true;
			createScrollingText();
		});
		
		// 点击屏幕任意位置发射烟花
		canvas.addEventListener('click', function(event) {
			const rect = canvas.getBoundingClientRect();
			const clickX = event.clientX - rect.left;
			const clickY = event.clientY - rect.top;
			
			const startX = canvas.width / 2;
			const startY = canvas.height;
			
			fireworks.push(new Firework(startX, startY, clickX, clickY));
		});
		
		// 随机发射烟花
		setInterval(() => {
			if (Math.random() > 0.7) {
				launchFirework();
			}
		}, 2000);
		
		// 初始化应用
		init();
	</script>
</body>
</html>